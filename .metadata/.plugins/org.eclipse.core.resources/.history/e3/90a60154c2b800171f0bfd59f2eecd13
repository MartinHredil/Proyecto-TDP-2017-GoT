package juego;
import mapa.*;
import personajes.*;
import niveles.*;
import objetos.*;
import enemigos.*;
import herramientas.*;
import disparos.*;
import java.util.Iterator;

import javax.swing.JLabel;

public class Juego {

	protected Nivel nivel;
	protected Mapa mapa;
	protected int cantFilas, cantColumnas, puntos, monedas;
	protected Coleccion<Enemigo> enemigos;
	protected Coleccion<Personaje> personajes;
	protected Coleccion<Objeto> objetos;
	protected Coleccion<DisparoEnemigo> disparosenemigos;
	protected Coleccion<DisparoPersonaje> disparospersonajes;
	protected GUI gui;
	protected Thread refresco;
	
	public Juego(GUI g)
	{
		gui = g;
		mapa = new Mapa(6,10*80,this);
		
		//nivel = new Nivel1();
		
		cantFilas=6;
		cantColumnas=10*80;
		enemigos = new Coleccion<Enemigo>();
		personajes = new Coleccion<Personaje>();
		objetos = new Coleccion<Objeto>();
		disparosenemigos = new Coleccion<DisparoEnemigo>();
		disparospersonajes = new Coleccion<DisparoPersonaje>();
		puntos=0;
		monedas=0;
		
		//PRUEBA
		
		Enemigo prueba=new Muerto(mapa.getCelda(0,700));
		mapa.getCelda(0,700).agregar(prueba);
		//enemigos.add(prueba);
		
		/*Personaje prueba7= new Arquero(mapa.getCelda(0, 80));
		mapa.getCelda(0,80).agregar(prueba7);
		
		DisparoPersonaje prueba3 = new FlechaArquero(mapa.getCelda(0, 80));
		mapa.getCelda(0, 80).agregar(prueba3);
		disparospersonajes.add(prueba3);
		
		DisparoPersonaje prueba4 = new FlechaArquero(mapa.getCelda(0, 160));
		mapa.getCelda(0, 160).agregar(prueba4);
		disparospersonajes.add(prueba4);
		
		Enemigo prueba6=new Muerto(mapa.getCelda(1,600));
		mapa.getCelda(1,600).agregar(prueba6);*/
		
		Personaje prueba2= new Arquero(mapa.getCelda(0, 0));
		mapa.getCelda(0,0).agregar(prueba2);
		
		Personaje prueba5= new Soldado(mapa.getCelda(1, 0));
		mapa.getCelda(1,0).agregar(prueba5);
		
		//FIN PRUEBA
		
		refrescar();
		
	}
	
	public Juego(GUI g,int f, int c)
	{
		gui = g;
		mapa = new Mapa(f,c,this);
		
		//nivel = new Nivel1();
		
		cantFilas=f;
		cantColumnas=c;
		enemigos = new Coleccion<Enemigo>();
		personajes = new Coleccion<Personaje>();
		objetos = new Coleccion<Objeto>();
		disparosenemigos = new Coleccion<DisparoEnemigo>();
		disparospersonajes = new Coleccion<DisparoPersonaje>();
		puntos=0;
		monedas=0;
		
		refrescar();
		
	}
	
	public Juego(GUI g,Nivel n)
	{
		gui = g;
		mapa = new Mapa(6,10,this);
		nivel = n;
		cantFilas=6;
		cantColumnas=10;
		enemigos = new Coleccion<Enemigo>();
		personajes = new Coleccion<Personaje>();
		objetos = new Coleccion<Objeto>();
		disparosenemigos = new Coleccion<DisparoEnemigo>();
		disparospersonajes = new Coleccion<DisparoPersonaje>();
		puntos=0;
		monedas=0;
		
		refrescar();
	}
	
	public Juego(GUI g, int f, int c, Nivel n)
	{
		gui = g;
		mapa = new Mapa(f,c,this);
		nivel = n;
		cantFilas=f;
		cantColumnas=c;
		enemigos = new Coleccion<Enemigo>();
		personajes = new Coleccion<Personaje>();
		objetos = new Coleccion<Objeto>();
		disparosenemigos = new Coleccion<DisparoEnemigo>();
		disparospersonajes = new Coleccion<DisparoPersonaje>();
		puntos=0;
		monedas=0;
		
		refrescar();
	}
	
	public int getFilas()
	{
		return cantFilas;
	}
	
	public int getColumnas()
	{
		return cantColumnas;
	}
	
	public int getMonedas()
	{
		return monedas;
	}
	
	public int getPuntos()
	{
		return puntos;
	}
	
	public Mapa getMapa()
	{
		return mapa;
	}
	
	public Iterator<Enemigo> getEnemigos()
	{
		return enemigos.iterator();
	}
	
	public Iterator<DisparoEnemigo> getDisparosEnemigos()
	{
		return disparosenemigos.iterator();
	}
	
	public Iterator<DisparoPersonaje> getDisparosPersonajes()
	{
		return disparospersonajes.iterator();
	}

	public void eliminar(Enemigo e)
	{
		enemigos.remove(e);
	}
	
	public void eliminar(Personaje p)
	{
		personajes.remove(p);
	}
	
	public void eliminar(Objeto o)
	{
		objetos.remove(o);
	}
	
	public void eliminar(DisparoEnemigo de)
	{
		disparosenemigos.remove(de);
	}
	
	public void eliminar(DisparoPersonaje dp)
	{
		disparospersonajes.remove(dp);
	}
	
	public void agregar(DisparoPersonaje dp)
	{
		disparospersonajes.add(dp);
		gui.agregar(dp.getGrafico());
	}
	
	public void agregar(Enemigo e)
	{
		enemigos.add(e);
		gui.agregar(e.getGrafico());
	}
	
	public void agregar(Personaje p)
	{
		personajes.add(p);
		gui.agregar(p.getGrafico());
	}
	
	public void incrementarMonedas(int m)
	{
		monedas+=m;
	}
	
	public void incrementarPuntos(int p)
	{
		puntos+=p;
	}
	
	private void refrescar()
	{
		refresco = new RefrescarGUI(gui);
		refresco.start();
	}

}
